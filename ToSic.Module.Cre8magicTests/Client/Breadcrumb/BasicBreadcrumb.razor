@using ToSic.Cre8magic.Act
@using ToSic.Cre8magic.Breadcrumbs
@using ToSic.Cre8magic.Pages
@inherits ComponentBase
@inject IMagicHat MagicHat
@code {
    [CascadingParameter] public required PageState PageState { get; set; }

    [Parameter] public MagicBreadcrumbSettings? Settings { get; set; }

    // TODO: note also that we're using BreadcrumbKit.Pages.Classes(...) somewhere, so we should add the designer to the kit

    [Parameter] public IMagicPageDesigner Designer { get; set; } = new MagicBreadcrumbDesignerBs5();
}
@{
    var breadcrumbKit = MagicHat.BreadcrumbKit(Settings.With(PageState).With(Designer));
}
<nav aria-label="breadcrumb">
    <ol class='@breadcrumbKit.Root.Classes("ol")'>
        @foreach (var item in breadcrumbKit.Pages)
        {
            <li class='@item.Classes("li")'>
                @* TODO: IMPROVE HasLink / UseLink, etc. *@
                @if (item.IsActive)
                {
                    <span class='@item.Classes("span")' aria-current="page">@item.Name</span>
                }
                else
                {
                    <a href="@item.Link" class='@item.Classes("a")'>@item.Name</a>
                }
            </li>
        }
    </ol>
</nav>
